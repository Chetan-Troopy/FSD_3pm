<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Promise In JavaScript</title>

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />

    <!-- Custom CSS  -->

    <style>
      img {
        width: 200px;
      }
    </style>
  </head>
  <body class="bg-dark text-light">
    <h1>Promise In JavaScript</h1>
    <p>
      A promise in JavaScript is an object representing the eventual result of
      an asynchronous operation.
    </p>
    <p>
      It acts as a placeholder for a value that may not be available
      immediately.
    </p>
    <p>
      Promises help manage asynchronous code, making it more readable and
      maintainable compared to traditional callback
    </p>

    <ul>
      <li>
        Pending -> The initial state, representing that the asynchronous
        operation is still in progress.
      </li>
      <li>
        Fulfilled -> The operation completed successfully, and the promise now
        holds the resulting value.
      </li>
      <li>
        Rejected -> The operation failed, and the promise holds a reason for the
        failure.
      </li>
    </ul>

    <hr />
    <button onclick="nextProduct()" class="btn btn-success">Next Product</button>
    <div id="dispData" class="container text-center text-light bg-dark"></div>

    <script>
      // shyncronus Operation

      //   let a = 5;
      //   console.log(a);

      //   let b = 6;
      //   console.log(b);

      //   let res = a + b;
      //   console.log(res);

      // Ashyncronus Operation

      //   const promise = new Promise((resolve, reject) => {
      //     let a = 5;
      //     let b = 6;
      //     if (a == b) {
      //       resolve("sahi Hai!");
      //     } else {
      //       reject("galat hai!");
      //     }
      //   })
      //     .then((res) => {
      //       console.log(res);
      //     })
      //     .catch((err) => {
      //       console.log(err);
      //     });
      let count = 1;
      async function getProducts() {
        try {
          const ApiData = await fetch(
            `https://fakestoreapi.com/products/${count}`
          );
          console.log(ApiData);
          const data = await ApiData.json();
          console.log(data);

          document.getElementById("dispData").innerHTML = `
        <div class="card text-center text-light bg-danger" style="width: 15rem;">
            <img src=${data.image} class="card-img-top w-50 m-auto"  alt="...">
            <div class="card-body">
                <h5 class="card-title text-light">${data.title}</h5>
                <p class="card-text text-light">${data.description}</p>
                <a href="#" class="btn btn-primary">Go somewhere</a>
                </div>
                </div>
                
                `;
        } catch (error) {
          console.log(error);
        }
      }

      function nextProduct() {
        count++;
        getProducts();
      }
      getProducts();

    </script>
  </body>
</html>
